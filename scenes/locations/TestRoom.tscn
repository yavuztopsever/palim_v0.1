[gd_scene load_steps=5 format=3 uid="uid://dxoiobyeml77c"]

[ext_resource type="PackedScene" uid="uid://bmodular_player" path="res://scenes/characters/ModularPlayer.tscn" id="1_player"]
[ext_resource type="PackedScene" uid="uid://bmodular_npc" path="res://scenes/characters/ModularNPC.tscn" id="2_npc"]
[ext_resource type="Resource" uid="uid://c0r2b7aqmap83" path="res://data/dialogue/celeste_dialogue.tres" id="3_celeste_dialogue"]
[ext_resource type="NavigationMesh" uid="uid://y0po8upefa3v" path="res://navigation/MainNavigationMesh.tres" id="4_navmesh"]

[node name="TestRoom" type="Node3D"]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = ExtResource("4_navmesh")

[node name="Ground" type="CSGBox3D" parent="."]
use_collision = true
collision_mask = 0
size = Vector3(40, 0.2, 40)

[node name="ModularPlayer" parent="." instance=ExtResource("1_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2, 0)

[node name="ModularNPC" parent="." instance=ExtResource("2_npc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0.2, 5)
npc_name = "Celeste"
dialogue_resource = ExtResource("3_celeste_dialogue")

[node name="Walls" type="Node3D" parent="."]

[node name="NorthWall" type="CSGBox3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -10)
use_collision = true
collision_layer = 8
collision_mask = 0
size = Vector3(20, 4, 0.5)
metadata/wall_direction = "north"

[node name="SouthWall" type="CSGBox3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 10)
use_collision = true
collision_layer = 8
collision_mask = 0
size = Vector3(20, 4, 0.5)
metadata/wall_direction = "south"

[node name="EastWall" type="CSGBox3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 2, 0)
use_collision = true
collision_layer = 8
collision_mask = 0
size = Vector3(0.5, 4, 20)
metadata/wall_direction = "east"

[node name="WestWall" type="CSGBox3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 2, 0)
use_collision = true
collision_layer = 8
collision_mask = 0
size = Vector3(0.5, 4, 20)
metadata/wall_direction = "west"

[node name="Desk" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.5, -3)
use_collision = true
collision_layer = 16
collision_mask = 0
size = Vector3(2, 1, 1)

[node name="DeskNavObstacle" type="NavigationObstacle3D" parent="Desk"]
radius = 1.2
height = 1.5
